<html>
  <head>
    <meta charset="UTF-8"/>
    <title>ZPass2</title>
    <style media="screen" type="text/css">
    fieldset {
      border-style: solid;
      border-left-style: none;
      border-right-style: none;
    }
    input {
      display: block;
      margin-bottom: 10px;
      padding: 5px;
    }
    output {
      font-family: monospace;
      font-size: x-large;
    }
    </style>
    <script type="text/javascript" src="libs/unorm.js"></script>
    <script type="text/javascript" src="libs/buffer.js"></script>
    <script type="text/javascript" src="libs/scrypt.js"></script>
    <script type="text/javascript" src="libs/zpass2.js"></script>
    <script type="text/javascript">
      function dohash() {
        var password = document.getElementById('password').value;
        var uri = document.getElementById('domain').value;;
        zpass2(password, uri, showResult);
      }

      function showResult(genPass) {
        var out = document.getElementById('result');
        out.innerText = genPass.slice(0, 16);
        // make password text selected for copy/past
        var selection = window.getSelection();
        var range = document.createRange();
        range.selectNodeContents(out);
        selection.removeAllRanges();
        selection.addRange(range);
      }
    </script>
  </head>
  <body>
    <form name="form1" action="javascript:dohash();">
      <fieldset>
        <legend>ZPass2</legend>
        <label for="password">Your Password</label>
        <input id="password" type="password" />
        <label for="domain">Site Domain</label>
        <input id="domain" type="text" placeholder="site.net" />
        <p><output id="result">&nbsp;</output></p>
        <input id="genPassButton" type="submit" value="Generate Password" />
      </fieldset>
    </form>
    <script type="text/javascript" language="JavaScript">
      document.forms['form1'].elements['password'].focus();
    </script>
  </body>
</html>
