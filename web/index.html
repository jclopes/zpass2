<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8"/>
    <title>ZPass2</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript" src="libs/unorm.js"></script>
    <script type="text/javascript" src="libs/buffer.js"></script>
    <script type="text/javascript" src="libs/scrypt.js"></script>
    <script type="text/javascript" src="libs/zpass2.js"></script>
    <script type="text/javascript">
      function dohash() {
        var password = document.getElementById('password').value;
        var uri = document.getElementById('domain').value;;
        zpass2(password, uri, showResult);
      }

      function showResult(genPass) {
        var out = document.getElementById('result');
        out.innerText = genPass.slice(0, 16);
        // make password text selected for copy/past
        var selection = window.getSelection();
        var range = document.createRange();
        range.selectNodeContents(out);
        selection.removeAllRanges();
        selection.addRange(range);
      }
    </script>
  </head>
  <body>
    <div class="app">
      <form name="zpass2" action="javascript:dohash();">
        <fieldset>
          <label for="password">Your Password</label>
          <input id="password" type="password" />
          <label for="domain">Site Domain</label>
          <input id="domain" type="text" placeholder="site.net or app name" />
          <p><output id="result">&nbsp;</output></p>
          <input id="genPassButton" type="submit" value="Generate Password" />
        </fieldset>
      </form>
    </div>
    <script type="text/javascript" language="JavaScript">
      document.forms['zpass2'].elements['password'].focus();
    </script>
  </body>
</html>
